@extends('layouts.index')
@section('content')
<div id="main">
    <main>
        <div class="widget">
            <a href="https://github.com/ItzApipAjalah" target="_blank">
                <div class="content">
                    <div class="icon" style="background-color: transparent;">
                        <img src="../src/image/github.png" alt="">
                    </div>
                    <div class="meta">
                        <b>GitHub</b>
                        <p>ItzApipAjalah</p>
                    </div>
                </div>
            </a>
        </div>
        <div class="widget">
            <a href="https://discord.com/users/481734993622728715" target="_blank">
                <div class="content">
                    <div class="icon" style="background-color: tra;">
                        <svg fill="currentColor" viewBox="0 0 640 512">
                            <path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path>
                        </svg>
                    </div>
                    <div class="meta">
                        <b>Discord</b>
                        <p>medya_wishnu</p>
                    </div>
                </div>
            </a>
        </div>
        <div class="widget">
            <a href="https://www.linkedin.com/in/afif-medya-5ba201267/" target="_blank">
                <div class="content">
                    <div class="icon">

                            <svg width="800px" height="800px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="none"><path fill="#0A66C2" d="M12.225 12.225h-1.778V9.44c0-.664-.012-1.519-.925-1.519-.926 0-1.068.724-1.068 1.47v2.834H6.676V6.498h1.707v.783h.024c.348-.594.996-.95 1.684-.925 1.802 0 2.135 1.185 2.135 2.728l-.001 3.14zM4.67 5.715a1.037 1.037 0 01-1.032-1.031c0-.566.466-1.032 1.032-1.032.566 0 1.031.466 1.032 1.032 0 .566-.466 1.032-1.032 1.032zm.889 6.51h-1.78V6.498h1.78v5.727zM13.11 2H2.885A.88.88 0 002 2.866v10.268a.88.88 0 00.885.866h10.226a.882.882 0 00.889-.866V2.865a.88.88 0 00-.889-.864z"/></svg>
                    </div>
                    <div class="meta">
                        <b>LinkedIN</b>
                        <p>Afif Medya</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="widget">
            <a href="https://instagram.com/apip01____" target="_blank">
                <div class="content">
                    <div class="icon" style="background-color: transparent; --size: 60%;">


                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                viewBox="0 0 551.034 551.034" style="enable-background:new 0 0 551.034 551.034;" xml:space="preserve">
                                <g id="XMLID_13_">

                                        <linearGradient id="XMLID_2_" gradientUnits="userSpaceOnUse" x1="275.517" y1="4.5714" x2="275.517" y2="549.7202" gradientTransform="matrix(1 0 0 -1 0 554)">
                                        <stop  offset="0" style="stop-color:#E09B3D"/>
                                        <stop  offset="0.3" style="stop-color:#C74C4D"/>
                                        <stop  offset="0.6" style="stop-color:#C21975"/>
                                        <stop  offset="1" style="stop-color:#7024C4"/>
                                    </linearGradient>
                                    <path id="XMLID_17_" style="fill:url(#XMLID_2_);" d="M386.878,0H164.156C73.64,0,0,73.64,0,164.156v222.722
                                        c0,90.516,73.64,164.156,164.156,164.156h222.722c90.516,0,164.156-73.64,164.156-164.156V164.156
                                        C551.033,73.64,477.393,0,386.878,0z M495.6,386.878c0,60.045-48.677,108.722-108.722,108.722H164.156
                                        c-60.045,0-108.722-48.677-108.722-108.722V164.156c0-60.046,48.677-108.722,108.722-108.722h222.722
                                        c60.045,0,108.722,48.676,108.722,108.722L495.6,386.878L495.6,386.878z"/>

                                        <linearGradient id="XMLID_3_" gradientUnits="userSpaceOnUse" x1="275.517" y1="4.5714" x2="275.517" y2="549.7202" gradientTransform="matrix(1 0 0 -1 0 554)">
                                        <stop  offset="0" style="stop-color:#E09B3D"/>
                                        <stop  offset="0.3" style="stop-color:#C74C4D"/>
                                        <stop  offset="0.6" style="stop-color:#C21975"/>
                                        <stop  offset="1" style="stop-color:#7024C4"/>
                                    </linearGradient>
                                    <path id="XMLID_81_" style="fill:url(#XMLID_3_);" d="M275.517,133C196.933,133,133,196.933,133,275.516
                                        s63.933,142.517,142.517,142.517S418.034,354.1,418.034,275.516S354.101,133,275.517,133z M275.517,362.6
                                        c-48.095,0-87.083-38.988-87.083-87.083s38.989-87.083,87.083-87.083c48.095,0,87.083,38.988,87.083,87.083
                                        C362.6,323.611,323.611,362.6,275.517,362.6z"/>

                                        <linearGradient id="XMLID_4_" gradientUnits="userSpaceOnUse" x1="418.306" y1="4.5714" x2="418.306" y2="549.7202" gradientTransform="matrix(1 0 0 -1 0 554)">
                                        <stop  offset="0" style="stop-color:#E09B3D"/>
                                        <stop  offset="0.3" style="stop-color:#C74C4D"/>
                                        <stop  offset="0.6" style="stop-color:#C21975"/>
                                        <stop  offset="1" style="stop-color:#7024C4"/>
                                    </linearGradient>
                                    <circle id="XMLID_83_" style="fill:url(#XMLID_4_);" cx="418.306" cy="134.072" r="34.149"/>
                                </g>
                            </svg>

                    </div>
                    <div class="meta">
                        <b>Instagram</b>
                        <p>apip01____</p>
                    </div>
                </div>
            </a>
        </div>
        <div class="widget js" style="--columns: 4; height: 178px;">
            <canvas id="skillsChart" width="400" height="200"></canvas>
        </div>

        <div class="widget" style="--columns: 4; height: 178px;">
            <div id="discord">
                <div class="content">
                    <div class="icon">
                        <img src="{{ 'https://api.lanyard.rest/' . $data['data']['discord_user']['id'] . '.jpg' }}" alt="avatar" draggable="false">
                    </div>
                    <div class="meta">
                        <b id="name">{{ $data['data']['discord_user']['username'] }}</b>
                        <p>
                            <span id="dot" style="background-color:
                                @switch($data['data']['discord_status'])
                                    @case('online') #4b8 @break
                                    @case('idle') #fa1 @break
                                    @case('dnd') #f44 @break
                                    @case('offline') #778 @break
                                    @default #000
                                @endswitch
                            "></span>
                            <span id="status">{{ $data['data']['discord_status'] }}</span>
                        </p>
                    </div>
                </div>
                <div class="rpc">
                    <div>
                        <div id="large_image">
                            @if($data['data']['listening_to_spotify'])
                                <img src="{{ $data['data']['spotify']['album_art_url'] }}" alt="Album Art" style="width: 80px; height: 80px;">
                            @else
                                @php
                                    $activityName = $data['data']['activities'][0]['name'] ?? '';
                                    $imageUrl = '';

                                    // Prioritizing YouTube Music
                                    if ($activityName == 'YouTube Music') {
                                        $rawImageUrl = $data['data']['activities'][0]['assets']['large_image'] ?? '';
                                        if (strpos($rawImageUrl, 'i.ytimg.com') !== false) {
                                            $imageUrl = 'https://i.ytimg.com/' . explode('i.ytimg.com/', $rawImageUrl)[1];
                                        } elseif (strpos($rawImageUrl, 'lh3.googleusercontent.com') !== false) {
                                            $imageUrl = 'https://lh3.googleusercontent.com/' . explode('lh3.googleusercontent.com/', $rawImageUrl)[1];
                                        }
                                    } else {
                                        switch ($activityName) {
                                            case 'Visual Studio Code':
                                                $imageUrl = 'https://cdn.thenewstack.io/media/2021/10/4f0ac3e0-visual_studio_code.png';
                                                break;
                                            case 'VALORANT':
                                                $imageUrl = 'https://seeklogo.com/images/V/valorant-logo-FAB2CA0E55-seeklogo.com.png';
                                                break;
                                            case 'Roblox':
                                                $imageUrl = 'https://upload.wikimedia.org/wikipedia/commons/4/48/Roblox_Logo_2021.png';
                                                break;
                                            case 'Palworld':
                                                $imageUrl = 'https://pwmodding.wiki/ru/img/palworld.png';
                                                break;
                                            default:
                                                $imageUrl = '';
                                                break;
                                        }
                                    }
                                @endphp
                                @if($imageUrl)
                                    <img src="{{ $imageUrl }}" alt="{{ $activityName }}" style="width: 80px; height: 80px;">
                                @endif
                            @endif
                        </div>
                        <div id="small_image"></div>
                    </div>
                    <div class="meta">
                        <div id="details">
                            @if($data['data']['listening_to_spotify'])
                                {{ "Listening To " . $data['data']['spotify']['song'] }}
                            @elseif($activityName == 'YouTube Music')
                                {{ "Listening To " . ($data['data']['activities'][0]['details'] ?? '') }}
                            @else
                                {{ $activityName }}
                            @endif
                        </div>
                        <div id="details2">
                            @if($data['data']['listening_to_spotify'])
                                {{ "By " . $data['data']['spotify']['artist'] }}
                            @elseif($activityName == 'YouTube Music')
                                {{ $data['data']['activities'][0]['state'] ?? '' }}
                            @else
                                {{ $data['data']['activities'][0]['state'] ?? '' }}
                            @endif
                        </div>
                        <div id="timestamp">
                            @php
                                $startTimestamp = $data['data']['activities'][0]['timestamps']['start'] ?? 0;
                                $endTimestamp = $data['data']['activities'][0]['timestamps']['end'] ?? 0;
                            @endphp
                            <span id="time_elapsed"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        <div class="widget" style="--columns: 4; --rows: 1;">
            <!-- Tautan dengan event listener -->
            <a id="showImage">
                <div class="content">
                    <div class="icon" style="background-color: #48d; --size: 60%;">
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 22 22" style="enable-background:new 0 0 299.594 299.594;" xml:space="preserve" width="22" height="22"><g><g><g><path d="M17.842 10.261H3.159a0.54 0.54 0 0 0 0 1.079h14.683a0.54 0.54 0 1 0 0 -1.079"/><path d="M14.499 12.715H3.159a0.54 0.54 0 0 0 0 1.079h11.34a0.54 0.54 0 0 0 0.54 -0.54c0 -0.298 -0.242 -0.54 -0.54 -0.54"/><path d="M6.967 8.536h7.067a0.54 0.54 0 0 0 0.54 -0.54V4.338a0.54 0.54 0 0 0 -0.54 -0.54H6.967a0.54 0.54 0 0 0 -0.54 0.54v3.659a0.54 0.54 0 0 0 0.54 0.54m0.54 -3.659h5.987v2.579h-5.987z"/><path d="M21.001 12.523V1.707a0.54 0.54 0 0 0 -0.54 -0.54H0.54A0.54 0.54 0 0 0 0 1.707v14.308a0.54 0.54 0 0 0 0.54 0.54h15.994a3.084 3.084 0 0 0 0.25 0.298v3.441c0 0.481 0.584 0.719 0.921 0.382l1.269 -1.269 1.269 1.269c0.339 0.339 0.921 0.099 0.921 -0.382v-3.441c1.172 -1.231 1.105 -3.182 -0.163 -4.329m-4.969 2.951H1.079V2.246h18.842v9.646c-2.24 -0.737 -4.445 1.277 -3.89 3.582m4.052 3.516 -0.729 -0.729a0.54 0.54 0 0 0 -0.763 0l-0.729 0.729v-1.408c0.71 0.28 1.511 0.28 2.221 0zm-1.111 -2.276c-1.079 0 -1.946 -0.88 -1.946 -1.946 0 -1.073 0.873 -1.946 1.946 -1.946 1.075 0 1.946 0.876 1.946 1.946 0 1.075 -0.875 1.946 -1.946 1.946"/></g></g></g></svg>
                    </div>
                    <div class="meta">
                        <b>CV</b>
                        <p>Click me</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="widget" style="--columns: 4; --rows: 1;">
            <a href="mailto:afif@amwp.website">
                <div class="content">
                    <div class="icon" style="background-color: #48d; --size: 60%;">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"></path>
                        </svg>
                    </div>
                    <div class="meta">
                        <b>Email</b>
                        <p>afifmedya@gmail.com</p>
                    </div>
                </div>
            </a>
        </div>



        <div class="widget" style="--columns: 4; --rows: 1;">
            <a id="visitor-link">
                <div class="content">
                    <div class="icon" style="background-color: #48d; --size: 60%;">
                        <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C8.134 2 5 5.134 5 9c0 2.837 1.686 5.257 4.109 6.426-.06.44-.109.888-.109 1.341 0 .713.091 1.404.254 2.066C6.111 17.794 2 14.193 2 9c0-5.523 4.477-10 10-10s10 4.477 10 10c0 5.193-4.111 8.794-7.254 10.832.163-.662.254-1.353.254-2.066 0-.453-.049-.901-.109-1.341C17.314 14.257 19 11.837 19 9c0-3.866-3.134-7-7-7zm-.905 19.986A2.004 2.004 0 0 1 11 20c0-.49.17-.96.476-1.333a11.114 11.114 0 0 1 1.048-.982C13.5 19.162 15.5 21.5 17 23c-.828 0-3.5-.682-5.905-1.014zM8.5 23c1.5-1.5 3.5-3.838 4.476-5.315.348.352.656.711.982 1.048A11.114 11.114 0 0 1 14 20c0 .71.332 1.405.905 1.986C13.5 23.682 10.828 24 8.5 23zM12 15c-1.102 0-2.216-.179-3.309-.5-.215.263-.45.514-.709.75C10.014 16.607 11 19 12 21c1-2 1.986-4.393 4.018-5.75-.259-.236-.494-.487-.709-.75A13.037 13.037 0 0 1 12 15z"/>
                        </svg>
                    </div>
                    <div class="meta">
                        <b>Total Visitors</b>
                        <p id="visitor-count">{{ $visitorCount }}</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="widget" style="--columns: 4; --rows: 3;">
            <a id="visitor-link">
                <div class="content">

                    <canvas id="visitorChart"></canvas>
                </div>
            </a>
        </div>

        {{-- <div class="widget" style="--columns: 9; --rows: 1;">
            <a id="deploy-link">
                <div class="content">
                    <div class="icon" style="background-color: #48d; --size: 60%;">
                        <svg width="24" height="24" viewBox="0 0 0.72 0.72" xmlns="http://www.w3.org/2000/svg">
                            <path d="M.269.54A.075.075 0 0 1 .195.6h-.06A.015.015 0 0 1 .12.585v-.06A.075.075 0 0 1 .18.451v-.01Q.181.415.185.39h-.11A.015.015 0 0 1 .061.369l.06-.15A.02.02 0 0 1 .135.21h.137A.37.37 0 0 1 .618.09.02.02 0 0 1 .63.102a.37.37 0 0 1-.12.346v.137a.02.02 0 0 1-.009.014l-.15.06A.015.015 0 0 1 .33.645V.534Q.305.538.279.539zM.24.531.19.481a.045.045 0 0 0-.04.044V.57h.045A.045.045 0 0 0 .24.531M.36.527v.096L.48.575V.472a.4.4 0 0 1-.12.056M.193.36A.4.4 0 0 1 .249.24H.146L.098.36zm.068.15L.278.509Q.303.508.328.504A.34.34 0 0 0 .602.118L.562.114a.34.34 0 0 0-.351.328L.21.459zM.42.39a.09.09 0 1 1 0-.18.09.09 0 0 1 0 .18m0-.03a.06.06 0 1 0 0-.12.06.06 0 0 0 0 .12"/>
                        </svg>
                    </div>
                    <div class="meta">
                        <b>Last Deploy</b>
                        <p id="deploy-info">{{ $lastCommitTitle }}</p>
                    </div>
                </div>
            </a>
        </div> --}}
            {{-- <div class="widget" style="--columns: 4; --rows: 1;">
                <a href="chat/index">
                    <div class="content">
                        <div class="icon" style="background-color: #48d; --size: 60%;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 0.96 0.96" xml:space="preserve"><path d="M.93.12H.84V.03A.03.03 0 0 0 .81 0H.03A.03.03 0 0 0 0 .03v.6a.03.03 0 0 0 .03.03h.09v.15a.03.03 0 0 0 .03.03h.27l.099.099a.03.03 0 0 0 .042 0L.66.84h.27A.03.03 0 0 0 .96.81V.15A.03.03 0 0 0 .93.12M.9.18v.6H.635L.54.875.445.78H.18v-.6zM.06.6V.06h.72v.09h-.6a.03.03 0 0 0-.03.03V.6zM.3.36h.48v.03H.3zm0 .09h.48v.03H.3zm0 .09h.48v.03H.3z" style="fill:#111918"/></svg>
                        </div>
                        <div class="meta">
                            <b>Web Chat</b>
                            <p>Click Me</p>
                        </div>
                    </div>
                </a>
            </div> --}}
            <!-- <div class="widget" style="--columns: 4; --rows: 6; --m-columns: 4; --m-rows: 6;">
                <div id="animeList" ></div>
            </div> -->
            {{-- <div id="gachaWidget" class="widget" style="--columns: 4; --rows: 1;">
                <a href="#" onclick="showWaifu()">
                    <div class="content">
                        <div class="icon" style="background-color: #48d; --size: 60%;">
                            <svg width="800" height="800" viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="m521.639 981.708-46.026-92.38c-2.922-6.558-7.293-10.168-11.733-11.784-4.893-1.782-10.06-1.195-14.346 1.139-8.088 4.403-13.417 15.117-6.339 27.222l46.019 92.367c2.922 6.558 7.293 10.178 11.732 11.788 4.894 1.78 10.062 1.2 14.349-1.14 8.086-4.4 13.415-15.12 6.337-27.223zm55.299 0-46.026-92.38c-2.923-6.558-7.294-10.168-11.733-11.784-4.893-1.782-10.06-1.195-14.347 1.139-8.087 4.403-13.417 15.117-6.338 27.222l46.019 92.367c2.922 6.558 7.293 10.178 11.732 11.788 4.893 1.78 10.061 1.2 14.348-1.14 8.087-4.4 13.415-15.12 6.338-27.223zm-112.19-87.278 46.344 93.018.114.192c2.802 4.71 1.492 9.032-1.651 10.744-3.096 1.686-7.105.178-9.417-5.08l-.058-.132-46.345-93.019-.114-.192c-2.801-4.708-1.492-9.028 1.65-10.739 3.096-1.685 7.107-.179 9.419 5.076zm55.298 0 46.345 93.018.114.192c2.802 4.71 1.492 9.032-1.651 10.744-3.096 1.686-7.106.178-9.417-5.08l-.058-.132-46.345-93.019-.114-.192c-2.801-4.708-1.492-9.028 1.65-10.739 3.096-1.685 7.107-.179 9.419 5.076zm76.74 20.029-12.723-24.554c-2.921-6.532-7.282-10.131-11.712-11.744-4.893-1.782-10.061-1.195-14.348 1.14-8.096 4.409-13.427 15.146-6.313 27.267l12.717 24.556c2.922 6.53 7.284 10.126 11.714 11.738 4.893 1.78 10.061 1.191 14.347-1.145 8.096-4.411 13.426-15.148 6.312-27.269zm-10.578 5.668.171.307c2.802 4.71 1.491 9.033-1.652 10.746-3.096 1.686-7.106.183-9.417-5.072l-.077-.174-13.051-25.199-.09-.152c-2.802-4.71-1.492-9.032 1.651-10.744 3.096-1.686 7.105-.178 9.417 5.08l.077.176z" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" transform="translate(-424 -848)"/></svg>
                        </div>
                        <div class="meta">
                            <b>Gacha Waifu</b>
                            <p>Click Me</p>
                        </div>
                    </div>
                </a>
            </div> --}}



    </main>
    <aside id="projects-container">
                <!-- project github -->
            </aside>


</div>
@endsection

@push('scripts')
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var startTimestamp = {{ $startTimestamp }};
        var endTimestamp = {{ $endTimestamp }};
        var timeElapsedElement = document.getElementById("time_elapsed");
        var hasRefreshedOnce = false;

        function updateTimeElapsed() {
            var now = Date.now();
            var timeElapsed = now - startTimestamp;
            var timeRemaining = endTimestamp - now;

            // Calculate hours, minutes, and seconds for elapsed time
            var hours = Math.floor((timeElapsed / (1000 * 60 * 60)) % 24);
            var minutes = Math.floor((timeElapsed / (1000 * 60)) % 60);
            var seconds = Math.floor((timeElapsed / 1000) % 60);

            // Format the elapsed time string
            var timeString =
                (hours < 10 ? "0" : "") + hours + ":" +
                (minutes < 10 ? "0" : "") + minutes + ":" +
                (seconds < 10 ? "0" : "") + seconds;

            timeElapsedElement.textContent = timeString;

            // Refresh the page if endTimestamp is reached for YouTube Music or Spotify
            if (endTimestamp > 0 && timeRemaining <= 0) {
                if (!hasRefreshedOnce) {
                    hasRefreshedOnce = true;
                    setTimeout(() => {
                        location.reload();
                    }, 4000);
                } else {
                    location.reload();
                }
            } else {
                // Update every second
                setTimeout(updateTimeElapsed, 1000);
            }
        }

        // Initialize the time update
        if (startTimestamp > 0) {
            updateTimeElapsed();
        }
    });
</script>


<script>
    if (!localStorage.getItem('visitor_recorded')) {
            localStorage.setItem('visitor_recorded', 'true');
            // Trigger the backend logic to add a visitor
            fetch('{{ url("/") }}');
        }

        document.addEventListener("DOMContentLoaded", function() {
            var ctx = document.getElementById('visitorChart').getContext('2d');
            var visitorChart = new Chart(ctx, {
                type: 'pie', // 'pie' or 'bar'
                data: {
                    labels: {!! json_encode($countries) !!},
                    datasets: [{
                        label: 'Visitors by Country',
                        data: {!! json_encode($totals) !!},
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)',
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutBounce',
                        animateRotate: true,
                        animateScale: true
                    }
                }
            });
        });
</script>
<script>
    const ctx = document.getElementById('skillsChart').getContext('2d');
    const skillsChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['HTML', 'CSS', 'JS', 'PHP', 'DART'],
        datasets: [{
            label: 'Keahlian Pemrograman',
            data: [7, 4, 9, 8, 4],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(0, 166, 255, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(0, 166, 255, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        },
        plugins: {
            tooltip: {
                callbacks: {
                    label: function(context) {
                        let label = context.dataset.label || '';
                        if (label) {
                            label += ': ';
                        }
                        label += context.raw;
                        if (context.label === 'PHP') {
                            label += ' (terutama di framework Laravel)';
                        }
                        return label;
                    }
                }
            }
        }
    }
});

</script>



@endpush
